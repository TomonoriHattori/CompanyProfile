var elmWin=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;$(function(){module.smoothScroll();module.smoothScrollForOtherpage();module.disableBtn();module.animatedIn();module.accordion();module.form();module.pageTop();module.imgBackground();commonInit()});var module={settings:{sp_breakpoint:767,pagetopSettings:{selector:$(".Pagetop"),show_point:100,offsetFixPosition:70},smoothScrollSettings:{adjustScrollPosition:false,headerHeight:{pc:80,sp:50},spOnly:false,breakpoint:767,time:500},animatedInSettings:{use:true,viewOffset:"70%",moveOffset:100,delayInterval:.2,animationTime:1}},smoothScroll:function(){$('a[href^="#"]').add(".sScroll").not(".noscroll").on("click",function(){var href;if($(this).data("target")){href=$(this).data("target")}else{href=$(this).attr("href")}if(href!="#"){var p=$(href=="#top"?"html":href).offset().top;var s=module.settings.smoothScrollSettings;if(s.adjustScrollPosition){if(getWindowWidth()<s.breakpoint){p-=s.headerHeight.sp}else{if(!s.spOnly){p-=s.headerHeight.pc}}}$("html, body").stop().animate({scrollTop:p},module.settings.smoothScrollSettings.time,function(){});return false}})},smoothScrollForOtherpage:function(){$(window).on("load",function(){var url=$(location).attr("href");if(url.indexOf("?id=")!=-1){var id=url.split("?id=");var $target=$("#"+id[id.length-1]);if($target.length){var p=$target.offset().top;var s=module.settings.smoothScrollSettings;if(s.adjustScrollPosition){if(getWindowWidth()<s.breakpoint){p-=s.headerHeight.sp}else{if(!s.spOnly){p-=s.headerHeight.pc}}}$("html, body").animate({scrollTop:p},s.time,function(){})}}})},animatedIn:function(){var s=module.settings.animatedInSettings;if(!s.use){return}var target=$(".js-animation");var targets=$(".js-animations");target.each(function(index){var waypoints=$(this).waypoint({handler:function(direction){var that=this.element;if($(that).hasClass("done")){return}if(direction=="down"){setDefault(that);showContents(that)}},offset:s.viewOffset})});targets.each(function(){$(this).find(">*").each(function(index){var waypoints=$(this).waypoint({handler:function(direction){var that=this.element;if($(that).hasClass("done")){return}if(direction=="down"){setDefault(that);showContents(that,index)}},offset:s.viewOffset})})});function setDefault(t){if($(t).hasClass("ani-left")){TweenMax.set(t,{x:-s.moveOffset})}else if($(t).hasClass("ani-right")){TweenMax.set(t,{x:s.moveOffset})}else if($(t).hasClass("ani-top")){TweenMax.set(t,{y:-s.moveOffset})}else if($(t).hasClass("ani-bottom")){TweenMax.set(t,{y:s.moveOffset})}}function showContents(t,d){if(elmWin<module.settings.sp_breakpoint){d=0}TweenMax.to(t,s.animationTime,{opacity:1,x:0,y:0,z:0,scale:1,ease:Power2.easeOut,delay:d*s.delayInterval,onStart:function(){$(t).addClass("done")}})}$(window).trigger("scroll")},disableBtn:function(){$(".btn-disabled").on("click",function(e){if($(this).hasClass("btn-disabled")){e.preventDefault()}});$("a.disabled").on("click",function(e){if($(this).hasClass("disabled")){e.preventDefault()}})},accordion:function(){var accordions=$("[data-type = accordion]");accordions.css("cursor","pointer");accordions.each(function(){var selector=$(this).data("target");if($(selector).css("display")!="none"){$(this).addClass("open");$(this).removeClass("close")}else{$(this).addClass("close").removeClass("open")}});accordions.on("click",function(){var selector=$(this).data("target");if($(selector).css("display")!="none"){$(selector).stop(true).slideUp();$(this).addClass("close").removeClass("open")}else{if($(this).data("group")){$("[data-group = "+$(this).data("group")+"]").each(function(){$(this).addClass("close").removeClass("open");$($(this).data("target")).stop(true).slideUp()})}$(selector).stop(true).slideDown();$(this).addClass("open").removeClass("close")}})},form:function(){$("#form-agree").on("click",function(){if(this.checked){$("#form-agree_target").removeClass("btn-disabled")}else{$("#form-agree_target").addClass("btn-disabled")}})},pageTop:function(){var footer=$(".Footer");var s=module.settings.pagetopSettings;var $pagetop=s.selector;$pagetop.hide();if(footer.length){$(window).on("scroll",function(){if($(window).scrollTop()>s.show_point){$pagetop.stop(true).fadeIn();if($(window).scrollTop()>footer.offset().top-$(window).height()+s.offsetFixPosition){$pagetop.addClass("fixed")}else{$pagetop.removeClass("fixed")}}else{$pagetop.stop(true).fadeOut()}})}},imgBackground:function(){$("img.bg-image").each(function(){var img={width:Number($(this).attr("width")),height:Number($(this).attr("height"))};var target=$($(this).prop("outerHTML").replace("<img","<div")+"</div>");target.removeAttr("width height alt src");target.css({backgroundImage:"url("+$(this).attr("src")+")"});$(this).before(target).remove()})}};function commonInit(){}function getWindowWidth(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth}$(document).ready(function(){var strMode="ua";var bEnable=false;switch(strMode){case"ua":{var ua=navigator.userAgent.toLowerCase();bEnable=ua.indexOf("phone")==-1&&ua.indexOf("ipad")==-1&&ua.indexOf("android")==-1;break}default:{bEnable=elmWin>SP_MAX_WIDTH;break}}if(bEnable){$("a.jsTelLink").each(function(){var elmNew=$("<span/>",{class:$(this).attr("class")});elmNew.html($(this).html());$(this).replaceWith(elmNew)})}});var blurAmount=0;var blurAmountBG=0;var scrollStart=0;var scrollThreshold=$(".fv").innerHeight();var scrollPos;var challengeAreaTop;var challengeAreaBottom;$(function(){$("#btn_menu").on("click",function(){$("#gNavi, #btn_menu").toggleClass("on")});$("#gNavi li a").on("click",function(){$("html, body").animate({scrollTop:$($(this).attr("href")).offset().top},"slow");$("#gNavi, #btn_menu").removeClass("on")});$(window).on("scroll",function(){challengeAreaTop=$(".for-challenge").offset().top;challengeAreaBottom=challengeAreaTop+$(".for-challenge").outerHeight();scrollPos=$(this).scrollTop();var scrollDirection;if(scrollPos>scrollStart){scrollDirection="down"}else{scrollDirection="up"}if(scrollPos>scrollStart){blurAmount+=.05;blurAmountBG+=.01}else{blurAmount-=.05}if(scrollPos<scrollThreshold&&scrollDirection==="up"){blurAmountBG-=.01}blurAmount=0;blurAmount=Math.min(10,Math.max(0,blurAmount));blurAmountBG=Math.min(.5,Math.max(0,blurAmountBG));$("#background .before").css("background-color","rgba(255,255,255,"+blurAmountBG+")");if(scrollPos>challengeAreaTop-300){$("#background .before").fadeOut()}else{$("#background .before").fadeIn()}if(scrollPos==0){blurAmount=0;blurAmountBG=0;$("#background .before").css("background-color","rgba(255,255,255,0)")}scrollStart=scrollPos;var $element=$("#ancker01");if($element.offset().top*.4<$(window).scrollTop()){$(".channel").addClass("active")}else{$(".channel").removeClass("active")}if(scrollPos>challengeAreaTop-300){$(".channel").removeClass("active")}else{}if(scrollPos==0){$(".channel").removeClass("active")}slideAnime();motionTextControl();BgFadeAnime()})});document.addEventListener("DOMContentLoaded",function(){window.setTimeout(splash_text,1e3);var element=$(".ani-text");element.each(function(){var html=$(this).html();var words=html.split(/(<[^>]*>)/);var textbox="";var delay=.05;words.forEach(function(word,index){if(/^<[^>]*>$/.test(word)){textbox+=word}else{word.split("").forEach(function(t,i){if(t!==" "){textbox+='<span style="animation-delay:'+delay+'s;">'+t+"</span>";delay+=.05}else{textbox+='<span style="animation-delay:'+delay+'s;">&nbsp;</span>';delay+=.05}})}});$(this).html(textbox)});var element2=$(".ani-text2");element2.each(function(){var html=$(this).html();var words=html.split(/(<[^>]*>)/);var textbox="";var delay=.01;words.forEach(function(word,index){if(/^<[^>]*>$/.test(word)){textbox+=word}else{word.split("").forEach(function(t,i){if(t!==" "){textbox+='<span style="animation-delay:'+delay+'s;">'+t+"</span>";delay+=.01}else{textbox+='<span style="animation-delay:'+delay+'s;">&nbsp;</span>';delay+=.01}})}});$(this).html(textbox)});motionTextControl()});function splash_text(){$(".splash .ani-bg").addClass("active");window.setTimeout(op_title01,2500)}function op_title01(){$(".op_title01").addClass("active");$(".op_title02").addClass("active");$(".container-fv .ani-bg").addClass("active");window.setTimeout(splash_close,2e3)}function splash_close(){$(".splash").addClass("fadeOut");$("body").removeClass("position-fixed");window.setTimeout(fv_text,1500)}function fv_text(){$(".splash").remove()}function motionTextControl(){$(".ani-text, .ani-text2").each(function(){var elemPos=$(this).offset().top-50;var scroll=$(window).scrollTop();var windowHeight=$(window).height();if(scroll>=elemPos-windowHeight){$(this).addClass("motiontext")}else{}})}function BgFadeAnime(){$(".bgmarkTrigger").each(function(){var elemPos=$(this).offset().top-50;var scroll=$(window).scrollTop();var windowHeight=$(window).height();if(scroll>=elemPos-windowHeight){$(this).addClass("bgMotion")}else{}});$(".bgappearTrigger").each(function(){var elemPos=$(this).offset().top-50;var scroll=$(window).scrollTop();var windowHeight=$(window).height();if(scroll>=elemPos-windowHeight){$(this).addClass("bgappear")}else{}});$(".ani-bg").each(function(){var elemPos=$(this).offset().top;var scroll=$(window).scrollTop();var windowHeight=$(window).height();var $element=$(this);if(scroll>=elemPos-windowHeight){$element.addClass("active")}else{}});$(".box-message figure").each(function(){var elemPos=$(this).offset().top+100;var scroll=$(window).scrollTop();var windowHeight=$(window).height();if(scroll>=elemPos-windowHeight){$(this).addClass("active-after");window.setTimeout(figure_open,200)}else{}})}function figure_open(){$(".box-message figure").addClass("active-before")}function slideAnime(){$(".leftAnime").each(function(){var elemPos=$(this).offset().top-50;var scroll=$(window).scrollTop();var windowHeight=$(window).height();if(scroll>=elemPos-windowHeight){$(this).addClass("slideAnimeLeftRight");$(this).children(".leftAnimeInner").addClass("slideAnimeRightLeft")}else{$(this).removeClass("slideAnimeLeftRight");$(this).children(".leftAnimeInner").removeClass("slideAnimeRightLeft")}})}